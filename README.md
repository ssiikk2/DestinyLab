# DestinyLab

DestinyLab? ?? ??? ?? ???? ??? ?? ?? Next.js ???? ???????. 
???(Compatibility)? ??(Destiny) ??? ???? ???, ??, ??? SEO ??? ????.

## ???? ??

```text
.
+- app
¦  +- api
¦  ¦  +- compatibility
¦  ¦  +- destiny
¦  ¦  +- indexnow
¦  +- blog/[slug]
¦  +- compatibility/[pair]
¦  +- reading/[id]
¦  +- reading/[id]/[section]
¦  +- og
¦  +- privacy / terms / disclaimer / contact / about
¦  +- [indexnowKey].txt
+- components
+- content
+- infra
¦  +- deploy-single.ps1
+- lib
+- providers
+- scripts
¦  +- generate-content.ts
+- keywords.csv
+- Dockerfile
+- .env.example
```

## ?? ?? ??

1. ??? ??

```bash
npm install
```

2. ?? ?? ?? ??

```bash
cp .env.example .env.local
```

3. ?? ?? ??

```bash
npm run dev
```

4. ???? ??

```text
http://localhost:3000
```

## ??? ?? ??

`keywords.csv`? ???? ?????.

1. ?? ??

```bash
npm run generate:content
```

2. ?? ? IndexNow ?? ?

```bash
npm run generate:content:ping
```

?? ??? `content/blog.generated.json`? ?????.

## ??? SEO ?? ??

1. ???? 20~50 ???? ?????.
2. `/blog/{slug}`? ???? ?? ??(FAQ 6? ??)? ?????.
3. `/compatibility/{signA}-and-{signB}`? ?? ??? ???? ?????.
4. ?? ??? ??? ? ?? ? ??? ???? ??? ?????.
5. ?? ??? ?? ??/?? ???? ??? ???? ?? ?????.

## Docker ?? ??

1. ??? ??

```bash
docker build -t destinylab:local .
```

2. ???? ??

```bash
docker run --rm -p 3000:3000 --env-file .env.local destinylab:local
```

## deploy-single.ps1 ?? ??

?? ??:
- Azure CLI ??
- `az login` ??
- ?? ?? ??

?? ??:

```powershell
./infra/deploy-single.ps1 `
  -ResourceGroup "destinylab-rg" `
  -Location "eastus" `
  -AcrName "destinylab12345" `
  -ContainerEnvName "destinylab-env"
```

????? ??? ?? ?????.
- `containerapp` ?? ??/????
- ??? ?? ??(???)
- ACR ??(???)
- Container Apps ?? ??(???)
- `az acr build`? ??? ??
- ?? ? `destinylab-main` ??
- ??? ID ??? + `AcrPull` ?? ??
- ? ??/FQDN/??? ??

## FQDN?? HTTPS ???

?? ???? ??? FQDN? ?????.

1. ?? ??

```text
https://<???-fqdn>
```

2. ?? ??? ??
- `/`
- `/privacy`
- `/robots.txt`
- `/sitemap.xml`
- `/og?tool=compatibility&score=82&label=Aries%20%2B%20Scorpio`

## ???? ?? ?????

1. ?? ??? 5?(Privacy/Terms/Disclaimer/Contact/About) ??
2. ?? ?? ?? ?? ??
3. ??? ?? ??(?? ???? ?? ?? ??)
4. ?? ?? ?? ??(? ?? ?? ?? ??)
5. ??? ???, ?? ??, ?? ?? ?? ??
6. `ADS_ENABLED=true` ?? ? ??? ???? ??/???? ??

## IndexNow ?? ??

1. ? ??
- ??? ? ???? ?? ?????.
- ?: `INDEXNOW_KEY=your_generated_key`

2. ?? ?? ??
- `.env.local` ?? ?? ?? ??? `INDEXNOW_KEY` ??

3. ? ?? ?? ??
- `https://<??? ?? FQDN>/<INDEXNOW_KEY>.txt` ?? ? ? ???? ????? ???.

4. Bing Webmaster ??
- Bing Webmaster Tools? ??? ??
- ???? URL(`https://<??? ?? FQDN>/sitemap.xml`) ??
- ??/??? ?? ??

5. ?? ? ???
- ??? ?? ? `npm run generate:content:ping` ??
- ?? `/api/indexnow`? URL ??? ?? ??

## ?? ?

1. ??? ????? ??? ??? ?? ??? ?? ?????.
2. ?? ?? ???? ???? ?? ??? ?????.
3. ? ?? ???, ????, ??? ????? ?? ??? ?????.
4. ??? ??? ???? ?? ??? ??? ??? ????? ?????.